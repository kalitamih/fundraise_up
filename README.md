Нужно было разбираться со стримами в MondoDB - до этого я не работал со стримами в MongoDB.

Далее была сложность связанная с ошибкой дублирования \_id при копировании документов в customers_anonymised. У нас 2 процесса независимых между собой - 1 подлная синхронизация, а другой - реалтайм. Мое решение это флаг { ordered: false } и игнорирование ошибки 'E11000 duplicate key error collection:'.

Также есть сложность, чтобы пытаться не делать полную синхронизацию для документов, которые были синхронизированы через changeEvent - я всетаки решил как самое простое решение сделать эти 2 режима абсолютно независимыми, так как возникает куча ситуаций, которые нужно учесть - для меня галвное получить работающее приложение, которое уже потом можно оптимизировать.

С типизацией были проблемы для монго моделей.

Структура кода тоже вызывает вопросы - но это всё обсуждаемо и можно решать за счёт последующее рефакторинга.

Суммарно я потратил на тестовое где-то 20 часов.

Шаги для запуска приложения:

1. npm install
2. нужно создать .env и добавить туда переменную DB_URI='url для подключения к монго'
3. npm build
4. npm run start:app - генерация customers
5. npm run start:real_time_sync - реал-тайм синхронизация
6. npm run start:full_sync - полная синхронизация
